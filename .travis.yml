language: python
python:
- 3.6
services:
- docker
cache: pip
install:
- pip install pytest
- pip install pytest-cov
- pip install -r requirements.txt
- pip install coveralls
script:
- PYTHONPATH=`pwd` pytest --cov=src
after_success:
- coveralls
- if [ "$TRAVIS_BRANCH" = "master" ]; then
    docker login -u=${DOCKER_USERNAME} -p=${DOCKER_PASSWORD} &&
    docker pull ${DOCKER_USERNAME}/rsd-backend &&
    docker build -t ${DOCKER_USERNAME}/rsd-backend --cache-from ${DOCKER_USERNAME}/rsd-backend . &&
    docker push ${DOCKER_USERNAME}/rsd-backend;
  fi
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: rXMwvdIAP6bzRYScj1GV6csDe9UVrBWenVJNa5OoiRseeLIGaHjrDkxjL6GfEUAsQNwJDZsU1D1WVOMlEehCn8uTK4DHaF/XUpTSrV9ZsuM4Tnuf5HBuPSUSX//mqZsYUMvgxH6DajJp4hxeAp8NCEQfhpiYd250jIlh5+YwBTWq5vTjotdzanWNs4YQ0p6F8gNhr85dXwpeWqW/m5pUgdQfUl6D3TS1ZF3DonU96KY5+qHUn+fVWxeUcCeeSH1INGG9ywmY08BCWSAzL9o7t1jLdaalEZuVkMSohUamLrS+2g4i3ZGxBJNKYXN0CGMRfhsG2ZUJnRzFtqxU8yvnpHt8jKKtk3pZ0xbTQPNtmYHeGzjfbMmGDAOBG6EJyQl9TFXjy9G8OePsWLjpt7PPiRpAYgVGLanzHAo0g1OuXwu8uDxplT9dtPDvnKK3HnyXJa9oFvBYlKkKjftEXy2mHwLMjjAT73M2N1K1VimogBm9oZnYK/pSFVnttfnZd2mNnBARw9hntmvyOz5DVf+Hjm4uiixhlt4YF/4FpIgLKWs70X7T/VkDojXi+aolrl6i+9eUOacwn6vC0RjHCOoig0JAQEfJomoLqXUB2YmI5ShAQ0Z+UwaG8RUJBbh8NC+uGrXoeQoaulaIJgrpSqN8aD4edFm0uEZNczReymPrkk0=
  - secure: knoC/wivq7nsn55TvM5xa+g7F5HS6JVVoK5AZjL5yIaiKEbINFPkCW7P2Y8tuKU77bf/MLJoB3iSzz942WSWT9ks+i+inP0FeZs8XbmsaORfe4kdwPwBwPr+kd8tSmQoI91PxfnAfpZvLOZCccOfh3jAfzXWwgLtgmqlsD0dWPtmm3x2PwYNWVqkA3vUz8evHPljnldYEtWrROo43tioQ70ETjbKniAndSRc/WC+hTC/oFeaH+MzwwR5siWM2KMqZtIVJsoXv0P35NOaVOAERRfdz+/TD0uuJjneeehL7r816eqU8wlB6TkMxwiHukoCd2M0ovd4yakUVJTO+42nDATcIuWwXj3omsxBzKCE2PvTqXmYrjNC47qII6bFIvMkNhx9n6sVXcvIyt3pINxhCzj9BtfQhFZMBXWdYCfaKecw1smSowEPWT+5BhqQDjnBX7A3SjihOvahWlITwA0/OtfTMbWUV5Jxj84i3uOfmcAxvKniMvuQjhCBdiYeW2Jj65PeVPwgdyXI1WV5wKshYRgogeWBDx9W2NEuKLywl7SqNdbjsI2l2yyy7ePMd7MiGK431J1Ce88ssgSTftAoPZoc9gasPKHPe6zdaRm8z+qkg1d3VSRvdwaH9vgSPu0kDjMvHL5Sf6E7A4OmeuZB9XfCg8/5cU1ibPhQmDMInWI=
  - secure: rX4T8+TVMNViNP0zD+cyZff3r2BA2DFZ32URaGLPOU5mSwWLbfVCmAfL1WjQPDpdMHkEO2VhaUV72K64WsLyEXMyphFl2HX/+QmrJavkHnJ9Wv3NCgKNHX7bip7ZwGPQDU2FXksXRyi8ecP1nyi07/ddJrQ7+fiR7U7icQx2K5nZbvKEmDt6DdKSQPeGIhnneSmF322SoG9LfiOzjfUAcn0b3mbalYwl04/8OJo/Em4JMgiI+nh9HwZBl+alh/GH3uii08wf0eTfUjX/w5lxT9wgYb++h1EAKPyXs5BVFRur0GJwAFtRUoDwC8EkVIxlsWs+tqZjNW5ybGw/a3hRkNt770dHKD2YI8IjEPZYjjPQy32K3dlMcWY9qqCCYrMYGo/LnoU+HhPxKHQ2pZnFsm/wI9nywMt++SAmWyPXQeHvwa8aOcN19h1sCsJUSaYiyogvVhs4pvH9YgIc14LbFlSa2plBSf5RUhRNt3jROwS52wz6qt4Xl/BodkD25PWaD6KHr2ODfK36PEbIWnQ3Ao9zz+O72kHziCg4Q+Zzf//zL8/4cSqAb0nHbZohRNriF4L2mTD7u7SI6VrSKgrAc1nKFwWnABJgWmnz622MZjsY4B39K+dpT5ogt70ExusQ8vciE3YrBVl497akmorA8QZAWSHGzonW6hDDTNI7jZw=
  - secure: BxzSAJ4y6QlLWiQ7+M0iPv9jAw4Qe86EPuETLJuQyZo2hzF9ShzSQ9Yu0JTu/0q70UnYb6uK9e44luqbXFI9AS9wPgZrz3HEa6whlwIhkKH8saTFK9c7pdB8HXz9XpfAiEoEpg22wKMOWiKRZaCjAdD6tESfu+L+zoOoXoJTkgewBP7WoSDiGkL05MeLzCF+qJZPxE9LuOKWg/7+EIAn6ta6ck5XRq1BzOhWxXSvDobxVg+vdvnwIFLmUYv14mfcecaiKuEJnpFo+E0qlQw9C75wnG85DVKYDS3lntmRi/Ml7ZqdW4ddkQ/kZJ3g9TKVYDOvw/wC9jI8XPicXlD0rAw9qVr9wo6liUEd9PdvUX5iiFsz8G4Mj/cBuzOOjCt1MWxQ+jXIebUUz50i01QqeLWYBqArKVrDl5z3q0L53FbDX0VTEt5tC6bnfzxK8ngso7ig4kFTz+p81xbW7iXEdSOm4NOvuQWq4NZ82MPpQ8VsgJARXeB0TYKoJRyQdVnZa/+IkUAPZnqX9kMOuHTGmqzPuwpR2lm3BykCUFJXckDkH18eV+Bo5e227tv2SmDpXK3T0z7w+iykkcya3iP/niO9F9WRXVhuPM1TinmQ0CFHDQvZbKr3YiJ83jtSs43YICWp/t2eU2M8Nc9eWMIyXsIipmvkxEr5O8XWLMJzLmA=
  - secure: Y7l+T9GqzMOsBsHnUks+2QX6iS9ssSnvvIeGz9IdhhKB/lDPLelOlEoq1OW0zNyrNvEV8fEreugMbkjz5XaEtr+tNUxIbAZ51D9R3vAXgT7u/NQyB583p0PdW6IvQPl24bVfocRzlduNpAfu770zHPTRzzCQ8csv6d1r/Ox8HLJB0x2zvsDDT08XXFpsqDlP/5O8yv1VcCIxpvm2P0iTMT46ANLaXMi8bfVd78NyRfK0NlUcU0MmAj741Cq1v8pNoEC2IxoOq3S2MrTm3Eb4DNIPs8USYy90hNUMJ0YcSFH3Whwo3bWFDicbj99Wpd+WvYrG7aAW/uR7WfWefYP5dL+pjBo3kObNBbngQd2HiNrlu5BfD/UdT5rPQDHz5WZJuuuGJw8znoZ/vsBXNxOaT0xtshDsNN2amkpCDCtSmTXgin1dZM2jbgWW5RPWuuzqev1m15VsatGae18xT8x8VhPTi1YRTMZjEvLQ+Vkej3eaKuv5qSPT/pmrIFPJMpdFiipeOKnAL7SF+Fj3dylaGYVM9JUsfJFXIvezTSiwJavC7MyfyiQyMsDD3CtgKcTlkrsabVBIH7maKItsg9C2yPLBSfatlrFX/LinqSqpDogU0ig/cgYRyxkeYgt4/ZzyA0MpOwqaVugzOhlHTCF9fetdVGArmQmjRy9dMgMgnqo=
  - secure: BdeM/QB4e650+8zQXUwmNKn77c4eid6gmiiwfWA204wSUbdqHc0OIOLglCJcD9OmT1kh2e2MniCzmhAFaQPMZwoDUTOYv5uKM9GZcd9HZF7XBk1LEUHnsxjtsnJgWrU92LRPvGJueR+m9QujzBuWOZpmVDuy3TKjA5gIgnqWaMUfAdR3IiXPDpuLq6PAR48/uujsFdGBpe79vJzKQb8VusQwN0+kkTPyQtKI9I9y6WR1hSJRxpx1NFizZ/WTr4vVNbSVvyHDYIZttfolNwfl2RDLJjEmZIFDviKZR4ICBoCRtwne/tNJAjieiZlo/wnJD1/04Pfb9WuSL1N9CC3Oyra435vTe7Y7i2f7DUqPLs+O9gqD4si2z8tFljZvliIVy1ShG37RPAyUGuJ7D1dYdOJeLVVjJrsMdZ5b+IPAuLZublJrX+a/NxeWzKVr3p2Rmw8b0oL9bAt+LD/DlH+vKmPSKoaRoT80lyYGyEAynW73oK5UVs5p8y8XLK7K17g/ly9nLwRBlplHo1FtNyxKbj0VVeRzHXj8yWIj09sICz75L3/K5FxtCMhdV7+JTRzY1rGHLliHzVqLeva3HoBOUxZ/P1Uq6ZrqfL5if/7UD798NlO5dAq8xQPfnJfmUNOcbhZmwmr4GFvlYf+FBOtboMa4SEv/waQEk98GRsZuQfk=
  - secure: FbNEGfvsEhRcylLGDrR4YZorScJQo0QpgXWpaWl5U7gLZYjOhAhYvXAiq1Z59uLkfpJNLDYkyLs2Ka3znzxkqP93MegybSy8Fhns1ZfF4BkNNB4uCVgD9mTvybyXOrX28oCwYEwgA6pj34iAmrJ2NyDQqNZeshZYZ3PhR9ZV1MtAWakpf7Nu5oG11YXzQY1sTPnuT4sAvBHGEMJk8N9MpdLJ/ExPCPbUD077HHQp4+cz/6Ee8BpeFIj4yxFJKqGO6Ds23l7QRF2nwzMJMDlZazi8/GqrfY7nxovbaJkRAFHklNKa8utlRNOg/WpKEUQTLVz3KjUFT/7jy/HiKCyFHcOxzZDyTI67HaGaFyQOgKVdX6SO/5893jq5HZeznq4m2tpEtZnARo01x7UpS1iCuAxS1mTILjB2OxNduy3g+h8CldgjGnL9xrEhermmwfTAglTNf0IHmx283LWTYQg/2av7p0eoDxEKvHcMNF2WFB18FnfKiZ2SDepSAYEil5JqAF+wqVqD0Mrww1hPCVFS6fVxaJQp0A2k0C92EMnTMunZf8tvf/xqF+Sqq73R2EoFvgrEFVXJwX671rfIpAWJLyZNn9Vh0SyY+8TyP6Lkh07NviLgWhmKBmnCpGEZiUTHuDcOq1QWaBBCzzuIL/qqN/Y5Y5k/BLwq+8lRhSoqrBo=
notifications:
  email:
  - t.klaver@esciencecenter.nl
